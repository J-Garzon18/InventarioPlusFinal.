<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario Plus/Inicio_sesion</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body id="form-register">

    <header>
  <div class="header-container">
    <h1 class="titulo"><a href="index.html">Inventario plus</a></h1>
    <nav>
      <ul class="menu">
        <li><a href="#¿Quienes somos?">¿Quienes somos?</a></li>
        <li><a href="#Objetivos">Objetivos</a></li>
        <li><a href="#¿Por qué elegirnos?">¿Por qué elegirnos?</a></li>
        <li><a href="conectar.html">Conectate</a></li>
        <li class="btn"><a href="registro.html">Registro</a></li>
        <li class="btn1"><a href="panelPrincipal.html">.</a></li>
        
      </ul>
      <div class="menu-line"></div>
    </nav>
  </div>
</header>
<!--Formulario de registro-->
  <section class="form-register">
    <form id="loginForm">
      <h2>Inicio de sesión</h2>
      <h4>Email:</h4>
      <input class="controles" type="text" name="Email" id="email" placeholder="Ingrese su Email">
      <h4>Contraseña:</h4>
      <input class="controles" type="password" name="password" id="passW" placeholder="Ingrese su contraseña">
      <input class="boton" type="submit" value="Ingresar">
      <p><a href="conectar.html">¿Olvidó su contraseña?</a></p>
    </form>
  </section>
   <script>
      document.getElementById("loginForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const user_email = document.getElementById("email").value;
        const user_password = document.getElementById("passW").value;

        if (!user_email || !user_password) {
          alert("Por favor complete todos los campos");
          return;
        }

        try {
          const response = await fetch("http://127.0.0.1:3000/api/usuarios/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ user_email, user_password })
          });

          const data = await response.json();

          if (response.ok && data.status) {
            alert("Inicio de sesión exitoso");

          } else {
            alert("Error: " + data.message);
          }

        } catch (error) {
          console.error("Error al iniciar sesión:", error);
          alert("Error al conectar con el servidor");
        }
      });
    </script>

</body>
</html>